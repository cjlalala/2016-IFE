<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>task18</title>
	<style>
	ul{
		list-style: none;
		height:300px;
	}
	textarea{
		margin-bottom:10px;
	}
	li{
		height:20px;
		display: inline-block;
		background-color: blue;
		color:white;
		margin:10px;
		padding:5px;
	}
	</style>
</head>

<body>
	Tag:<input type="text" id="tag">
	<ul id="tag-result">
	</ul>
	
	<textarea id="hobby" type="text" rows="5" cols="30"></textarea><br>
	<button id="test" >确认兴趣爱好</button>
	<div id="hobby-result">
	</div>


<script>
	var $=function(id){
	  return document.getElementById(id);
	}
	var number=[];
	$("tag").onkeypress=function(e){
		var key;
		if(window.event) key=e.keyCode;
		else if(e.which) key=e.which;
		switch(key){
			case 13:case 32:case 10:case 44:{    //判断输入的是否是空格、回车、逗号
				var input=$("tag").value,	
					content=input.split(/[\s\n\r\，\,]/);   //去掉输入的空格、回车、逗号
				for(var i=0;i<content.length;i++){
    				if(content[i]==""||typeof(content[i])=="undefined"){content.splice(i,1);
    				i--;
    				}
    			}
    			var num=[];			//去掉重复的tag
    			for(var i=0;i<content.length;i++){
    				for(var j=i+1;j<content.length;j++){
    					if(content[i]===content[j]) content.splice(j,1);

    				}
    				 num.push(content[i]);
    			}
    			number=num;
    			//number中只能有10个tag
    			if(number.length>10){
    				number.splice(0,number.length-10);
    			}
    			show();
			}
				
		}
	}
	//鼠标在tag上
	function over(target){
		var cont=target.innerHTML;
		target.innerHTML="删除"+cont;
	}
	//鼠标离开tag
	function out(target){
		var cont=target.innerHTML;
		target.innerHTML=cont.slice(2);
	}
	//被点击的tag被删除
	$("tag-result").addEventListener('click',function(e){
		var target=e.target;
		if(target.nodeName!="LI") return;
		  var tar=parseInt(target.getAttribute("id")); //得到被点击元素的id属性，之前id绑定的是元素在数组中的序号
        number.splice(tar,1); //删除被点击的元素，1代表只删除一个元素
        show();
        return number;

	})

 	//将数据显示到id为result的列表中
	function show(){
		var detail=" ";
		for(var i=0;i<number.length;i++){
				detail+="<li onmouseover='over(this)' onmouseout='out(this)' id='"+i+"'>"+number[i]+"</li>";
        	}
        $("tag-result").innerHTML=detail;
	}

	/*//给输出的结果添加事件委托，使点击的元素被删除
       $("-tag-result").addEventListener("click",function(e){
        var target=e.target;
        if(target.nodeName!="LI") return;
        var tar=parseInt(target.getAttribute("id")); //得到被点击元素的id属性，之前id绑定的是元素在数组中的序号
        number.splice(tar,1); //删除被点击的元素，1代表只删除一个元素
        show();
        return number;
	})
    //将得到的用户输入数据输出显示到id为result的列表中
	function show(){
		var detail=" ";
		for(var i=0;i<number.length;i++){
				detail+="<li id='"+i+"'>"+number[i]+"</li>";
        	}
        result.innerHTML=detail;
	}
	//把输入的字符串按照分隔符分割并存入数组中
	function cutString(){
		var value=$("input").value;
		var content=value.split(/[\s\n\r\，\,\、\t\ ]/);
    	for(var i=0;i<content.length;i++){
    		if(content[i]==""||typeof(content[i])=="undefined"){content.splice(i,1);
    			i--;
    		}
    	}
    	number=content;
	}
	$("test").onclick=function(){
		var hobby=$("hobby").value,
			detail=" ";
		for(var i=0;i<number.length;i++){
			if(number[i].match(hobby)!=null&&hobby!=""){
				detail+="<li id='"+i+"'class='blue'>"+number[i]+"</li>";
			}
			else detail+="<li id='"+i+"'>"+number[i]+"</li>";
		}
		result.innerHTML=detail;
	}*/
</script>
</body>
</html>
